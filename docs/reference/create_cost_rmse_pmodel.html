<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Creates a cost function for different simulation setups based on RMSE — create_cost_rmse_pmodel • rsofun</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,300;0,400;0,700;1,300;1,400&amp;display=swap" rel="stylesheet"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- geco --><link href="../geco.css" rel="stylesheet"><meta property="og:title" content="Creates a cost function for different simulation setups based on RMSE — create_cost_rmse_pmodel"><meta property="og:description" content="Creates a cost function for parameter calibration, keeping non-calibrated
parameter values fixed and calibrating the parameters corresponding to setups
BRC and FULL from Stocker et al., 2020 GMD. The cost function
computes the root mean squared error (RMSE) on the calibrated parameters."><meta name="twitter:card" content="summary"><!-- Mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">

    <div class="navbar-header">

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="external-link hidden-sm hidden-xs" href="https://computationales.ethz.ch/">
          <img src="https://raw.githubusercontent.com/computationales/GECO_template/main/geco_logo_small.png" id="hexlogo" alt="GECO"></a>
        <a class="external-link hidden-md hidden-lg" href="https://computationales.ethz.ch/">
          <img src="https://raw.githubusercontent.com/computationales/GECO_template/main/geco_logo_small.png" id="hexlogo" alt="GECO"></a>
        <a class="navbar-brand" href="../index.html">
           <i>rsofun <small>v4.3</small></i>
        </a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/biomee_model_structure.html">BiomeE model structure</a>
    </li>
    <li>
      <a href="../articles/biomee_use.html">BiomeE usage</a>
    </li>
    <li>
      <a href="../articles/new_cost_function.html">Parameter calibration and cost functions</a>
    </li>
    <li>
      <a href="../articles/pmodel_use.html">P-model usage</a>
    </li>
    <li>
      <a href="../articles/prepare_forcing.html">Prepare forcing</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/computationales/rsofun/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates a cost function for different simulation setups based on RMSE</h1>
    <small class="dont-index">Source: <a href="https://github.com/computationales/rsofun/blob/HEAD/R/create_cost_function.R" class="external-link"><code>R/create_cost_function.R</code></a></small>
    <div class="hidden name"><code>create_cost_rmse_pmodel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a cost function for parameter calibration, keeping non-calibrated
parameter values fixed and calibrating the parameters corresponding to setups
<code>BRC</code> and <code>FULL</code> from Stocker et al., 2020 GMD. The cost function
computes the root mean squared error (RMSE) on the calibrated parameters.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_cost_rmse_pmodel</span><span class="op">(</span><span class="va">params_modl</span>, <span class="va">setup</span>, <span class="va">method</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>params_modl</dt>
<dd><p>A list of model parameter values, including <code>'kphio',
'soilm_par_a', 'soilm_par_b', 'tau_acclim_tempstress' </code>and <code>'par_shape_tempstress'</code>
in that order.</p></dd>


<dt>setup</dt>
<dd><p>A character string (<code>'BRC'</code> or <code>'FULL'</code>) indicating which
parameters are calibrated. For <code>setup = 'BRC'</code> only the quantum yield
efficiency <code>kphio</code> is calibrated; for <code>setup = 'FULL'</code> it also includes
the soil moisture stress parameters <code>soilm_par_a</code> and <code>soilm_par_b</code>
for calibration.</p></dd>


<dt>method</dt>
<dd><p>A character string indicating the optimization method that will
be used, either <code>'BayesianTools'</code> or <code>'GenSA'</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A cost function which computes the RMSE of the simulated GPP by the P-model 
versus the observed GPP. This cost function has as arguments a list of calibratable
model parameters <code>par</code>, a data frame of observations <code>obs</code>, and a
data frame of driver data <code>drivers</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The resulting cost function performs a P-model run for the value of
<code>par</code> given as argument and the remaining non-calibratable parameters
are held constant (specified via <code>params_modl</code>).</p>
<p>Since the calibration routine in <code>BayesianTools</code> is based on maximizing 
a cost function and we want to minimize the RMSE, the opposite value, 
<code>(-1)*RMSE</code>, is returned if <code>method = 'BayesianTools'</code>. <code>GenSA</code>
minimizes the given objective function, so the plain RMSE is returned when
<code>method = 'GenSA'</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Set model parameters</span></span></span>
<span class="r-in"><span><span class="va">pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  kphio          <span class="op">=</span> <span class="fl">0.04</span>,</span></span>
<span class="r-in"><span>  soilm_par_a    <span class="op">=</span> <span class="fl">2.8</span>,</span></span>
<span class="r-in"><span>  soilm_par_b    <span class="op">=</span> <span class="fl">1.7</span>,</span></span>
<span class="r-in"><span>  tau_acclim_tempstress  <span class="op">=</span> <span class="fl">7.3</span>,</span></span>
<span class="r-in"><span>  par_shape_tempstress   <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Write cost function</span></span></span>
<span class="r-in"><span><span class="va">cost_rmse_kphio</span> <span class="op">&lt;-</span> <span class="fu">create_cost_rmse_pmodel</span><span class="op">(</span></span></span>
<span class="r-in"><span>  params_modl <span class="op">=</span> <span class="va">pars</span>,</span></span>
<span class="r-in"><span>  setup <span class="op">=</span> <span class="st">'BRC'</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">'BayesianTools'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/computationales" target="_blank" class="external-link">
                          <div class="icon fab fa-github"></div></a>
                        <a href="https://computationales.ethz.ch/" target="_blank" class="external-link">
                          <div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/SteniBocker/" target="_blank" class="external-link">
                          <div class="icon fab fa-twitter"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Computationales</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Our Team</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://github.com/computationales" class="external-link">Packages</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Publications</a></li>
                            <li><a href="https://computationales.ethz.ch/" class="external-link">Blog</a></li>
                        </ul></div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer></div>

  


  

  </body></html>

